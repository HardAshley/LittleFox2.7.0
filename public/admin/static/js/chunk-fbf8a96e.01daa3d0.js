(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fbf8a96e"],{"4a57":function(e,t,a){"use strict";a("9ef3")},"72a3":function(e,t,a){"use strict";var l=a("fd6f"),s=a("f99f"),n=a("62ee"),r=a("5d64"),i=a("df01").get,o=RegExp.prototype,c=TypeError;l&&s&&r(o,"dotAll",{configurable:!0,get:function(){if(this!==o){if("RegExp"===n(this))return!!i(this).dotAll;throw new c("Incompatible receiver, RegExp required")}}})},"9ef3":function(e,t,a){},b208:function(e,t,a){"use strict";var l=a("fd6f"),s=a("0cb5").MISSED_STICKY,n=a("62ee"),r=a("5d64"),i=a("df01").get,o=RegExp.prototype,c=TypeError;l&&s&&r(o,"sticky",{configurable:!0,get:function(){if(this!==o){if("RegExp"===n(this))return!!i(this).sticky;throw new c("Incompatible receiver, RegExp required")}}})},c0e3:function(e,t,a){"use strict";e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}},cee4:function(e,t,a){"use strict";var l=a("c308"),s=a("d53d"),n=a("61eb"),r=a("bce3"),i=a("1d9f"),o=a("c0e3"),c=a("5206"),p=a("a8d7"),d=a("248e");s("search",(function(e,t,a){return[function(t){var a=i(this),s=r(t)?void 0:p(t,e);return s?l(s,t,a):new RegExp(t)[e](c(a))},function(e){var l=n(this),s=c(e),r=a(t,l,s);if(r.done)return r.value;var i=l.lastIndex;o(i,0)||(l.lastIndex=0);var p=d(l,s);return o(l.lastIndex,i)||(l.lastIndex=i),null===p?-1:p.index}]}))},d84b:function(e,t,a){"use strict";var l=a("fd6f"),s=a("08f9"),n=a("674f"),r=a("9de7"),i=a("c4c2"),o=a("957e"),c=a("00ab").f,p=a("08dc"),d=a("5cdc"),g=a("5206"),u=a("d42b"),f=a("0cb5"),_=a("7d0a"),h=a("ec4a"),m=a("ce8f"),v=a("dc33"),y=a("df01").enforce,b=a("070c"),x=a("b12d"),w=a("f99f"),k=a("4406"),S=x("match"),F=s.RegExp,z=F.prototype,C=s.SyntaxError,R=n(z.exec),T=n("".charAt),D=n("".replace),E=n("".indexOf),I=n("".slice),M=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,$=/a/g,j=/a/g,O=new F($)!==$,V=f.MISSED_STICKY,L=f.UNSUPPORTED_Y,P=l&&(!O||V||w||k||m((function(){return j[S]=!1,F($)!==$||F(j)===j||"/a/i"!==String(F($,"i"))}))),A=function(e){for(var t,a=e.length,l=0,s="",n=!1;l<=a;l++)t=T(e,l),"\\"!==t?n||"."!==t?("["===t?n=!0:"]"===t&&(n=!1),s+=t):s+="[\\s\\S]":s+=t+T(e,++l);return s},B=function(e){for(var t,a=e.length,l=0,s="",n=[],r={},i=!1,o=!1,c=0,p="";l<=a;l++){if(t=T(e,l),"\\"===t)t+=T(e,++l);else if("]"===t)i=!1;else if(!i)switch(!0){case"["===t:i=!0;break;case"("===t:R(M,I(e,l+1))&&(l+=2,o=!0),s+=t,c++;continue;case">"===t&&o:if(""===p||v(r,p))throw new C("Invalid capture group name");r[p]=!0,n[n.length]=[p,c],o=!1,p="";continue}o?p+=t:s+=t}return[s,n]};if(r("RegExp",P)){for(var G=function(e,t){var a,l,s,n,r,c,f=p(z,this),_=d(e),h=void 0===t,m=[],v=e;if(!f&&_&&h&&e.constructor===G)return e;if((_||p(z,e))&&(e=e.source,h&&(t=u(v))),e=void 0===e?"":g(e),t=void 0===t?"":g(t),v=e,w&&"dotAll"in $&&(l=!!t&&E(t,"s")>-1,l&&(t=D(t,/s/g,""))),a=t,V&&"sticky"in $&&(s=!!t&&E(t,"y")>-1,s&&L&&(t=D(t,/y/g,""))),k&&(n=B(e),e=n[0],m=n[1]),r=i(F(e,t),f?this:z,G),(l||s||m.length)&&(c=y(r),l&&(c.dotAll=!0,c.raw=G(A(e),a)),s&&(c.sticky=!0),m.length&&(c.groups=m)),e!==v)try{o(r,"source",""===v?"(?:)":v)}catch(b){}return r},Y=c(F),q=0;Y.length>q;)_(G,F,Y[q++]);z.constructor=G,G.prototype=z,h(s,"RegExp",G,{constructor:!0})}b("RegExp")},e382:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container",staticStyle:{padding:"0"}},[a("div",{staticClass:"search"},[a("p",[a("span",{staticClass:"label"},[e._v(e._s(e._f("lang")("注册时间"))+"：")]),a("el-date-picker",{staticStyle:{width:"340px"},attrs:{align:"right",type:"datetimerange",format:"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"range-separator":e._f("lang")("至"),"start-placeholder":e._f("lang")("时间开始"),"end-placeholder":e._f("lang")("时间结束"),size:"mini"},on:{change:e.dateChange},model:{value:e.search.date,callback:function(t){e.$set(e.search,"date",t)},expression:"search.date"}}),a("el-radio-group",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini"},on:{change:e.dateTypeChange},model:{value:e.dateType,callback:function(t){e.dateType=t},expression:"dateType"}},[a("el-radio-button",{attrs:{label:"day0"}},[e._v(e._s(e._f("lang")("今天")))]),a("el-radio-button",{attrs:{label:"day1"}},[e._v(e._s(e._f("lang")("昨天")))]),a("el-radio-button",{attrs:{label:"day2"}},[e._v(e._s(e._f("lang")("前天")))])],1)],1),a("p",[a("span",{staticClass:"label"},[e._v(e._s(e._f("lang")("用户ID"))+"：")]),a("el-input",{staticStyle:{width:"120px"},attrs:{type:"text",size:"mini",clearable:"",placeholder:e._f("lang")("请输入用户id")},model:{value:e.search.user_id,callback:function(t){e.$set(e.search,"user_id",t)},expression:"search.user_id"}}),a("span",{staticClass:"label"},[e._v(e._s(e._f("lang")("昵称"))+"：")]),a("el-input",{staticStyle:{width:"160px"},attrs:{type:"text",size:"mini",clearable:"",placeholder:e._f("lang")("请输入昵称")},model:{value:e.search.keyword,callback:function(t){e.$set(e.search,"keyword",t)},expression:"search.keyword"}})],1),a("p",[a("span",{staticClass:"label"},[e._v(e._s(e._f("lang")("类型"))+"：")]),a("el-radio-group",{attrs:{size:"mini"},model:{value:e.search.is_vip,callback:function(t){e.$set(e.search,"is_vip",t)},expression:"search.is_vip"}},[a("el-radio-button",{attrs:{label:"all"}},[e._v(e._s(e._f("lang")("全部")))]),a("el-radio-button",{attrs:{label:"no"}},[e._v(e._s(e._f("lang")("普通用户")))]),a("el-radio-button",{attrs:{label:"yes"}},[e._v(e._s(e._f("lang")("VIP会员")))])],1)],1),a("p",{staticStyle:{"padding-top":"10px"}},[a("span",{staticClass:"label"}),a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini"},on:{click:e.doSearch}},[e._v(e._s(e._f("lang")("筛选")))]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"default",plain:"",size:"mini"},on:{click:e.doInit}},[e._v(e._s(e._f("lang")("重置")))])],1)]),a("div",{staticClass:"box-panel",staticStyle:{"padding-bottom":"10px","margin-bottom":"0"}},[a("el-table",{attrs:{data:e.dataList,stripe:"",size:"medium","header-cell-class-name":"bg-gray"}},[a("el-table-column",{attrs:{prop:"id",label:e._f("lang")("用户ID"),width:"80"}}),a("el-table-column",{attrs:{prop:"create_time",label:e._f("lang")("注册时间"),width:"160"}}),a("el-table-column",{attrs:{label:e._f("lang")("头像昵称"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("img",{staticStyle:{height:"24px","margin-right":"5px"},attrs:{src:t.row.avatar}}),e._v(" "+e._s(t.row.nickname)+" ")])]}}])}),a("el-table-column",{attrs:{prop:"phone",label:e._f("lang")("手机号"),width:"180"}}),a("el-table-column",{attrs:{label:e._f("lang")("对话余额"),width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),e.showRecharge(t.row.id,"chat")}}},[e._v(e._s(t.row.balance)+" "+e._s(e._f("lang")("条")))])]}}])}),a("el-table-column",{attrs:{label:e._f("lang")("绘画余额"),width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),e.showRecharge(t.row.id,"draw")}}},[e._v(e._s(t.row.balance_draw)+" "+e._s(e._f("lang")("张")))])]}}])}),a("el-table-column",{attrs:{label:e._f("lang")("GPT4余额"),width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),e.showRecharge(t.row.id,"gpt4")}}},[e._v(e._s(t.row.balance_gpt4)+" "+e._s(e._f("lang")("万字")))])]}}])}),a("el-table-column",{attrs:{label:e._f("lang")("会员"),width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(a){return a.preventDefault(),e.showVipForm(t.row.id,t.row.vip_expire_time)}}},[e._v(e._s(e._f("lang")(t.row.vip_expire_time||"未开通")))])]}}])}),a("el-table-column",{attrs:{label:e._f("lang")("共消费"),width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.order_total)+" "+e._s(e._f("lang")("元"))+" ")]}}])}),a("el-table-column",{attrs:{label:e._f("lang")("共提问"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.msg_count)+" "+e._s(e._f("lang")("条"))+" ")]}}])}),a("el-table-column",{attrs:{prop:"commission1",label:e._f("lang")("推荐人")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.tuser?a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("img",{staticStyle:{height:"24px","margin-right":"5px"},attrs:{src:t.row.tuser.avatar}}),e._v(" "+e._s(t.row.tuser.nickname)+" [ID: "+e._s(t.row.tuid)+"] ")]):e._e()]}}])})],1),a("div",{staticClass:"footer"},[a("div",{staticClass:"tongji"},[a("i",{staticClass:"el-icon-s-data text-green",staticStyle:{"font-size":"20px"}}),e._v(" "+e._s(e._f("lang")("共"))+" "),a("span",{staticClass:"text-green"},[e._v(" "+e._s(e.tongji.userCount)+" ")]),e._v(" "+e._s(e._f("lang")("用户"))+"，"+e._s(e._f("lang")("对话余额"))+" "),a("span",{staticClass:"text-danger"},[e._v(" "+e._s(e.tongji.userBalance)+" ")]),e._v(e._s(e._f("lang")("条"))+"，"+e._s(e._f("lang")("绘画余额"))+" "),a("span",{staticClass:"text-danger"},[e._v(" "+e._s(e.tongji.userBalanceDraw)+" ")]),e._v(e._s(e._f("lang")("张"))+"，"+e._s(e._f("lang")("GPT4余额"))+" "),a("span",{staticClass:"text-danger"},[e._v(" "+e._s(e.tongji.userBalanceGpt4)+" ")]),e._v(e._s(e._f("lang")("万字"))+" ")]),a("el-pagination",{attrs:{"current-page":e.page,"page-size":e.pagesize,layout:"total, prev, pager, next",total:e.dataTotal},on:{"current-change":e.pageChange}})],1)],1),e.rechargeForm?a("div",[a("el-dialog",{attrs:{"custom-class":"my-dialog",title:e._f("lang")("余额充值"),width:"480px",visible:!0,"close-on-click-modal":!1,"append-to-body":!0,"before-close":e.closeRecharge}},[a("el-form",{ref:"form",attrs:{model:e.rechargeForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:e._f("lang")("充值类型"),prop:"type"}},[a("el-radio-group",{model:{value:e.rechargeForm["type"],callback:function(t){e.$set(e.rechargeForm,"type",t)},expression:"rechargeForm['type']"}},[a("el-radio",{staticStyle:{margin:"0 20px 5px 0"},attrs:{label:"chat",size:"mini"}},[e._v(e._s(e._f("lang")("对话余额")))]),a("el-radio",{attrs:{label:"draw",size:"mini"}},[e._v(e._s(e._f("lang")("绘画余额")))]),a("el-radio",{attrs:{label:"gpt4",size:"mini"}},[e._v(e._s(e._f("lang")("GPT4余额")))])],1)],1),"chat"===e.rechargeForm.type?a("el-form-item",{attrs:{label:e._f("lang")("充值条数"),prop:"num"}},[a("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:e._f("lang")("填入整数"),size:"small"},model:{value:e.rechargeForm.num,callback:function(t){e.$set(e.rechargeForm,"num",t)},expression:"rechargeForm.num"}}),a("span",{staticStyle:{color:"#666","margin-left":"10px"}},[e._v(" "+e._s(e._f("lang")("条")))]),a("p",{staticStyle:{color:"#999"}},[e._v(e._s(e._f("lang")("正数为增加，负数为减少")))])],1):e._e(),"draw"===e.rechargeForm.type?a("el-form-item",{attrs:{label:e._f("lang")("充值数量"),prop:"num"}},[a("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:e._f("lang")("填入整数"),size:"small"},model:{value:e.rechargeForm.num,callback:function(t){e.$set(e.rechargeForm,"num",t)},expression:"rechargeForm.num"}}),a("span",{staticStyle:{color:"#666","margin-left":"10px"}},[e._v(" "+e._s(e._f("lang")("张")))]),a("p",{staticStyle:{color:"#999"}},[e._v(e._s(e._f("lang")("正数为增加，负数为减少")))])],1):e._e(),"gpt4"===e.rechargeForm.type?a("el-form-item",{attrs:{label:e._f("lang")("充值字数"),prop:"num"}},[a("el-input",{staticStyle:{width:"130px"},attrs:{placeholder:e._f("lang")("填入整数"),size:"small"},model:{value:e.rechargeForm.num,callback:function(t){e.$set(e.rechargeForm,"num",t)},expression:"rechargeForm.num"}}),a("span",{staticStyle:{color:"#666","margin-left":"10px"}},[e._v(" "+e._s(e._f("lang")("万字")))]),a("p",{staticStyle:{color:"#999"}},[e._v(e._s(e._f("lang")("正数为增加，负数为减少")))])],1):e._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"default",icon:"el-icon-close",size:"small"},on:{click:e.closeRecharge}},[e._v(e._s(e._f("lang")("取 消")))]),a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:e.doRecharge}},[e._v(e._s(e._f("lang")("提 交")))])],1)],1)],1):e._e(),e.vipForm?a("div",[a("el-dialog",{attrs:{"custom-class":"my-dialog",title:e._f("lang")("设置vip会员时间"),width:"480px",visible:!0,"close-on-click-modal":!1,"append-to-body":!0,"before-close":e.closeVipForm}},[a("el-form",{ref:"form",attrs:{model:e.vipForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:e._f("lang")("到期时间"),prop:"vip_expire_time"}},[a("el-date-picker",{attrs:{type:"date",placeholder:e._f("lang")("留空则表示关闭会员"),"value-format":"yyyy-MM-dd",editable:"",clearable:""},model:{value:e.vipForm.vip_expire_time,callback:function(t){e.$set(e.vipForm,"vip_expire_time",t)},expression:"vipForm.vip_expire_time"}}),a("p",[e._v(e._s(e._f("lang")("留空表示关闭会员")))])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"default",icon:"el-icon-close",size:"small"},on:{click:e.closeVipForm}},[e._v(e._s(e._f("lang")("取 消")))]),a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small"},on:{click:e.setVipTime}},[e._v(e._s(e._f("lang")("提 交")))])],1)],1)],1):e._e()])},s=[],n=(a("582c"),a("cee4"),a("36fd"),a("772a"),a("d84b"),a("72a3"),a("b208"),a("e3e9"),a("c24f")),r={data:function(){return{dataList:[],dataTotal:0,page:1,pagesize:15,dateType:"",search:{date:[],user_id:"",is_vip:"all",keyword:""},tongji:{userCount:0,userBalance:0},rechargeForm:null,vipForm:null}},created:function(){this.doInit()},methods:{doInit:function(){this.dateType="",this.search={date:[],user_id:"",is_vip:"all",keyword:""},this.doSearch()},getList:function(){var e=this,t=Object.assign(this.search,{page:this.page,pagesize:this.pagesize});Object(n["h"])(t).then((function(t){e.dataList=t.data.list,e.dataTotal=t.data.count})),1===this.page&&Object(n["g"])(t).then((function(t){e.tongji=t.data}))},tableIndex:function(e){return this.pagesize*(this.page-1)+e+1},pageChange:function(e){this.page=e,this.getList()},doSearch:function(){this.page=1,this.getList()},dateChange:function(){this.dateType=""},dateTypeChange:function(){var e="",t=this.dateFormat(new Date,"yyyy-MM-dd"),a=this.dateFormat(new Date((new Date).setDate((new Date).getDate()-1)),"yyyy-MM-dd"),l=this.dateFormat(new Date((new Date).setDate((new Date).getDate()-2)),"yyyy-MM-dd");"day0"===this.dateType?e=t:"day1"===this.dateType?e=a:"day2"===this.dateType&&(e=l),this.search.date=[e+" 00:00:00",e+" 23:59:59"]},dateFormat:function(e,t){var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var l in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+l+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?a[l]:("00"+a[l]).substr((""+a[l]).length)));return t},showRecharge:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"chat";this.rechargeForm={type:t,user_id:e}},closeRecharge:function(){this.rechargeForm=null},doRecharge:function(){var e=this;Object(n["c"])(this.rechargeForm).then((function(t){e.getList(),e.$message.success(t.message),e.closeRecharge()}))},showVipForm:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.vipForm={user_id:e,vip_expire_time:t}},closeVipForm:function(){this.vipForm=null},setVipTime:function(){var e=this;Object(n["l"])(this.vipForm).then((function(t){e.getList(),e.$message.success(t.message),e.closeVipForm()}))}}},i=r,o=(a("4a57"),a("1805")),c=Object(o["a"])(i,l,s,!1,null,"5845550e",null);t["default"]=c.exports}}]);