(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-pay-model4"],{"07fb":function(t,e,a){"use strict";var i=a("2b34"),o=a.n(i);o.a},1267:function(t,e,a){"use strict";a.r(e);var i=a("8c30"),o=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=o.a},"2b34":function(t,e,a){var i=a("f09e");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("4f06").default;o("5d19f722",i,!0,{sourceMap:!1,shadowMode:!1})},"55a4":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"wrap"},[a("v-uni-view",{staticClass:"wallet"},[a("v-uni-view",{staticClass:"balance",staticStyle:{"margin-top":"12rpx"}},[t._v(t._s(t.model4Name)+"余额"),a("v-uni-text",[t._v(t._s(t.balance_model4))]),t._v("万字")],1)],1),t.model4List&&t.model4List.length>0?a("v-uni-view",{staticClass:"box",staticStyle:{"padding-right":"0"}},[a("v-uni-view",{staticClass:"box-title"},[a("v-uni-text",[t._v("充值"+t._s(t.model4Name)+"余额")]),a("v-uni-text",{staticClass:"desc"},[t._v("仅 "+t._s(t.model4Name)+" 模型可用")])],1),a("v-uni-view",{staticClass:"model4-list"},[t._l(t.model4List,(function(e,i){return a("v-uni-view",{key:i,class:"model4 "+(e.id==t.goods_id?"active":""),attrs:{"data-id":e.id},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseModel4.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"title"},[a("v-uni-text",{staticClass:"num"},[t._v(t._s(e.num))]),a("v-uni-text",{staticClass:"unit"},[t._v(t._s(t._f("lang")("万字")))])],1),a("v-uni-view",{staticClass:"price"},[t._v("特价"),a("v-uni-text",[t._v(t._s(e.price/100))]),t._v("元")],1),e.market_price>0?a("v-uni-view",{staticClass:"market_price"},[t._v("原价"+t._s(e.market_price/100)+"元")]):t._e()],1)})),a("v-uni-view",{staticStyle:{clear:"both"}})],2),a("v-uni-button",{staticClass:"btn-pay",attrs:{disabled:!t.goods_id||t.paying},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.doPayModel4.apply(void 0,arguments)}}},[t._v("立即充值"+t._s(t.model4Name))])],1):t._e()],1)},o=[]},"8c30":function(t,e,a){"use strict";a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d3b7"),a("159b");var i=getApp(),o={data:function(){return{isLogin:!1,system:"",balance_model4:0,model4List:[],goods_id:0,paying:!1,hasModel4:!1,model4Name:""}},onLoad:function(t){var e=this;this.setData({system:i.globalData.system}),this.checkModel4(),this.getGoodsList(),i.globalData.util.checkLogin().then((function(){e.getBalance(),e.setData({isLogin:!0})}))},onShow:function(){uni.setNavigationBarTitle({title:this.$lang("绘画充值")}),this.isLogin&&this.getBalance()},methods:{getBalance:function(){var t=this;i.globalData.util.request({url:"/h5/getBalance",loading:!1}).then((function(e){t.setData({balance_model4:e.data.balance_model4})}))},getGoodsList:function(){var t=this;i.globalData.util.request({url:"/order/getGoodsList",data:{type:"model4"}}).then((function(e){var a=e.data;a.forEach((function(e){e.is_default&&t.setData({goods_id:e.id})})),t.setData({model4List:a})}))},checkModel4:function(){var t=this;i.globalData.util.request({url:"/h5/hasModel4",data:{from:"h5"},loading:!1}).then((function(e){t.setData({hasModel4:e.data.hasModel4,model4Name:e.data.model4Name})}))},chooseModel4:function(t){var e=t.currentTarget.dataset.id;this.setData({goods_id:e})},doPayModel4:function(){var t=this;if(this.paying)return!1;var e=this.goods_id;if(0==e)return i.globalData.util.message("请选择充值套餐"),!1;this.setData({paying:!0}),setTimeout((function(){t.setData({paying:!1})}),2e3);var a="jsapi";!i.globalData.util.isWechat()&&i.globalData.util.isMobile()&&(a="native"),i.globalData.util.request({url:"/order/createOrder",data:{platform:"h5",trade_type:a,type:"gpt4",goods_id:e}}).then((function(t){if(t.data.pay_url&&(a="native"),"jsapi"==a){var e=t.data;i.globalData.jssdk.chooseWXPay({timestamp:e.timestamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign,success:function(t){i.globalData.util.message("支付成功","error",(function(){uni.redirectTo({url:"/pages/user/index"})}))},fail:function(t){i.globalData.util.message("发起支付失败","error")}})}else"native"==a&&uni.navigateTo({url:"/pages/pay/pay?total_fee="+t.data.total_fee+"&order_id="+t.data.order_id+"&pay_url="+encodeURIComponent(t.data.pay_url)})}))}}};e.default=o},d496:function(t,e,a){"use strict";a.r(e);var i=a("55a4"),o=a("1267");for(var n in o)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(n);a("07fb");var d=a("f0c5"),l=Object(d["a"])(o["default"],i["b"],i["c"],!1,null,"06e40d3b",null,!1,i["a"],void 0);e["default"]=l.exports},f09e:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"uni-page-body[data-v-06e40d3b]{margin:0;padding:0;background:#f7f7f8;font-family:微软雅黑;padding-bottom:%?30?%}body.?%PAGE?%[data-v-06e40d3b]{background:#f7f7f8}.mod-title[data-v-06e40d3b]{padding:%?30?% %?30?%;font-size:%?32?%}.mod-title uni-text[data-v-06e40d3b]{padding-left:%?16?%;border-left:%?8?% solid #04babe;line-height:%?24?%;height:%?30?%}.wallet[data-v-06e40d3b]{height:%?140?%;background:#04babe;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;padding-bottom:%?100?%;margin-bottom:%?-80?%}.wallet .balance[data-v-06e40d3b]{font-size:%?36?%;text-align:center}.wallet .balance uni-text[data-v-06e40d3b]{font-size:%?48?%;margin:0 %?10?%;color:red;font-weight:700}.wallet .vip[data-v-06e40d3b]{color:#eee}.model4-list[data-v-06e40d3b]{padding:0 0 %?20?% 0}.model4[data-v-06e40d3b]{background:#f3f6f9;width:%?292?%;height:%?206?%;border-radius:%?20?%;text-align:center;padding:%?20?% 0;float:left;margin-right:%?30?%;box-sizing:border-box;border:%?6?% solid #f3f6f9;margin-top:%?30?%}.model4 .title[data-v-06e40d3b]{font-size:%?48?%;display:flex;align-items:baseline;justify-content:center;font-weight:700}.model4 .title .unit[data-v-06e40d3b]{font-size:%?28?%;margin-left:%?20?%;font-weight:400}.model4 .price[data-v-06e40d3b]{font-size:%?28?%;margin:%?10?% 0;color:#444}.model4 .price uni-text[data-v-06e40d3b]{color:red;margin:0 %?6?%}.model4 .market_price[data-v-06e40d3b]{color:#999;text-decoration:line-through;font-size:%?24?%}.model4.active[data-v-06e40d3b]{border-color:#04babe}.btn-pay[data-v-06e40d3b]{width:%?400?%;height:%?80?%;padding:%?10?%;background-color:#04babe;border-radius:%?100?%;color:#fff;font-size:%?30?%;border:none;outline:none;margin:%?100?% 0 %?30?% %?110?%;box-sizing:border-box;display:flex;justify-content:center;align-items:center;letter-spacing:%?2?%}.btn-pay[data-v-06e40d3b]::after{display:none}.btn-pay[data-v-06e40d3b]:active{-webkit-transform:scale(.9);transform:scale(.9)}.box[data-v-06e40d3b]{width:%?690?%;background:#fff;margin:0 %?30?% %?30?% %?30?%;border-radius:%?20?%;overflow:hidden;padding:%?20?% %?40?%;box-sizing:border-box}.box .box-title[data-v-06e40d3b]{width:100%;height:%?72?%;line-height:%?72?%;font-size:%?32?%;color:#333;font-weight:700}.box .box-title .desc[data-v-06e40d3b]{font-weight:400;color:#999;font-size:%?24?%;margin-left:%?20?%}",""]),t.exports=e}}]);