(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-pay-vip"],{1316:function(t,i,a){"use strict";a.r(i);var e=a("5b3a"),n=a("789e");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(i,t,(function(){return n[t]}))}(o);a("97f0");var s=a("f0c5"),r=Object(s["a"])(n["default"],e["b"],e["c"],!1,null,"1ff1630a",null,!1,e["a"],void 0);i["default"]=r.exports},"19f3":function(t,i,a){"use strict";a("7a82"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,a("d3b7"),a("159b");var e=getApp(),n={data:function(){return{isLogin:!1,is_ios_pay:0,system:"",vip_expire_time:"",vipList:[],type:"vip",goods_id:0,paying:!1}},onLoad:function(t){var i=this;this.setData({system:e.globalData.system}),this.getGoodsList(),e.globalData.util.checkLogin().then((function(){i.getBalance(),i.setData({isLogin:!0})}))},onShow:function(){uni.setNavigationBarTitle({title:this.$lang("开通vip会员")}),this.isLogin&&this.getBalance()},methods:{getGoodsList:function(){var t=this;e.globalData.util.request({url:"/order/getGoodsList",data:{type:"vip"}}).then((function(i){var a=i.data;a.forEach((function(i){i.is_default&&t.setData({goods_id:i.id})})),t.setData({vipList:a})}))},getBalance:function(){var t=this;e.globalData.util.request({url:"/h5/getBalance",loading:!1}).then((function(i){t.setData({vip_expire_time:i.data.vip_expire_time})}))},chooseVip:function(t){var i=t.currentTarget.dataset.id;this.setData({goods_id:i})},doPayVip:function(){var t=this;if(this.paying)return!1;var i=this.goods_id;if(0==i)return e.globalData.util.message("请选择VIP套餐"),!1;this.setData({paying:!0}),setTimeout((function(){t.setData({paying:!1})}),2e3);var a="jsapi";!e.globalData.util.isWechat()&&e.globalData.util.isMobile()&&(a="native"),e.globalData.util.request({url:"/order/createOrder",data:{platform:"h5",trade_type:a,type:"vip",goods_id:i}}).then((function(t){if(t.data.pay_url&&(a="native"),"jsapi"==a){var i=t.data;e.globalData.jssdk.chooseWXPay({timestamp:i.timestamp,nonceStr:i.nonceStr,package:i.package,signType:i.signType,paySign:i.paySign,success:function(t){e.globalData.util.message("支付成功","error",(function(){uni.redirectTo({url:"/pages/user/index"})}))},fail:function(t){e.globalData.util.message("发起支付失败："+t.errMsg)}})}else"native"==a&&uni.navigateTo({url:"/pages/pay/pay?total_fee="+t.data.total_fee+"&order_id="+t.data.order_id+"&pay_url="+encodeURIComponent(t.data.pay_url)})}))}}};i.default=n},4459:function(t,i,a){var e=a("24fb");i=e(!1),i.push([t.i,"uni-page-body[data-v-1ff1630a]{margin:0;padding:0;background-color:#f7f7f8;font-family:微软雅黑;padding-bottom:%?30?%}body.?%PAGE?%[data-v-1ff1630a]{background-color:#f7f7f8}.mod-title[data-v-1ff1630a]{padding:%?30?% %?30?%;font-size:%?32?%}.mod-title uni-text[data-v-1ff1630a]{padding-left:%?16?%;border-left:%?8?% solid #04babe;line-height:%?24?%;height:%?30?%}.wallet[data-v-1ff1630a]{height:%?180?%;background:#333;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;text-align:center}.box-vip[data-v-1ff1630a]{width:%?690?%;height:100%;margin:0 auto;border-style:none;border-width:0;border:none;position:relative}.box-vip .bg[data-v-1ff1630a]{position:absolute;left:0;bottom:%?-10?%;width:100%;height:%?94?%;z-index:1}.box-vip .body[data-v-1ff1630a]{position:absolute;left:0;top:0;width:100%;height:100%;z-index:2;font-size:%?30?%;color:#eed196;display:flex;align-items:center;justify-content:space-between;box-sizing:border-box}.box-vip .body .icon[data-v-1ff1630a]{width:%?88?%;height:%?88?%}.box-vip .body .line[data-v-1ff1630a]{margin:0 %?20?%;vertical-align:middle;display:inline-block;width:%?1?%;height:%?32?%;background:rgba(238,209,150,.5)}.goods-list[data-v-1ff1630a]{padding:0 0 %?20?% 0}.goods[data-v-1ff1630a]{background:#f3f6f9;width:%?290?%;height:%?206?%;border-radius:%?20?%;text-align:center;padding:%?20?% 0;float:left;margin-right:%?30?%;box-sizing:border-box;border:%?6?% solid #f3f6f9;margin-top:%?30?%}.goods .title[data-v-1ff1630a]{font-size:%?48?%;display:flex;align-items:baseline;justify-content:center;font-weight:700}.goods .title .unit[data-v-1ff1630a]{font-size:%?28?%;margin-left:%?20?%;font-weight:400}.goods .price[data-v-1ff1630a]{font-size:%?28?%;margin:%?10?% 0;color:#444}.goods .price uni-text[data-v-1ff1630a]{color:red;margin:0 %?6?%}.goods .market_price[data-v-1ff1630a]{color:#999;text-decoration:line-through;font-size:%?24?%}.goods.active[data-v-1ff1630a]{border-color:#eed196}.btn-pay[data-v-1ff1630a]{width:%?400?%;height:%?80?%;padding:%?10?%;background:#333;color:#eed196;border:none;border-radius:%?100?%;font-size:%?30?%;outline:none;margin:%?100?% 0 %?30?% %?110?%;box-sizing:border-box;display:flex;justify-content:center;align-items:center;letter-spacing:%?2?%}.btn-pay[data-v-1ff1630a]::after{display:none}.btn-pay[data-v-1ff1630a]:active{-webkit-transform:scale(.9);transform:scale(.9)}.box[data-v-1ff1630a]{width:%?690?%;background:#fff;margin:0 %?30?% %?30?% %?30?%;border-radius:%?20?%;overflow:hidden;padding:%?30?% %?40?%;box-sizing:border-box}.box .box-title[data-v-1ff1630a]{width:100%;height:%?72?%;line-height:%?72?%;font-size:%?32?%;color:#333;font-weight:700}.box .box-title .desc[data-v-1ff1630a]{font-weight:400;color:#999;font-size:%?24?%;margin-left:%?20?%}",""]),t.exports=i},"5b3a":function(t,i,a){"use strict";a.d(i,"b",(function(){return e})),a.d(i,"c",(function(){return n})),a.d(i,"a",(function(){}));var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",{staticClass:"wrap"},[a("v-uni-view",{staticClass:"wallet"},[a("v-uni-view",{staticClass:"box-vip"},[a("v-uni-view",{staticClass:"body"},[a("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[a("v-uni-image",{staticClass:"icon",attrs:{src:"/static/images/user/ic_vip.png"}}),a("v-uni-text",[t._v(t._s(t._f("lang")("VIP会员")))]),a("v-uni-view",{staticClass:"line"}),t.vip_expire_time?a("v-uni-text",[t._v(t._s(t.vip_expire_time)+" "+t._s(t._f("lang")("到期")))]):a("v-uni-text",[t._v(t._s(t._f("lang")("未开通")))])],1)],1),a("v-uni-image",{staticClass:"bg",attrs:{src:"/static/images/user/bg-vip.png"}})],1)],1),t.vipList&&t.vipList.length>0?a("v-uni-view",{staticClass:"box",staticStyle:{"padding-right":"0","margin-top":"40rpx"}},[a("v-uni-view",{staticClass:"box-title"},[a("v-uni-text",[t._v(t._s(t._f("lang")("开通VIP会员")))]),a("v-uni-text",{staticClass:"desc"},[t._v(t._s(t._f("lang")("高速通道，无限对话")))])],1),a("v-uni-view",{staticClass:"goods-list"},[t._l(t.vipList,(function(i,e){return a("v-uni-view",{key:e,class:"goods "+(i.id==t.goods_id?"active":""),attrs:{"data-id":i.id},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.chooseVip.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"title"},[a("v-uni-text",{staticClass:"num"},[t._v(t._s(i.num))]),a("v-uni-text",{staticClass:"unit"},[t._v(t._s(t._f("lang")("个月")))])],1),a("v-uni-view",{staticClass:"price"},[t._v(t._s(t._f("lang")("特价"))),a("v-uni-text",[t._v(t._s(i.price/100))]),t._v(t._s(t._f("lang")("元")))],1),i.market_price>0?a("v-uni-view",{staticClass:"market_price"},[t._v(t._s(t._f("lang")("原价"))+t._s(i.market_price/100)+t._s(t._f("lang")("元")))]):t._e()],1)})),a("v-uni-view",{staticStyle:{clear:"both"}})],2),a("v-uni-button",{staticClass:"btn-pay",attrs:{disabled:!t.goods_id||t.paying},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.doPayVip.apply(void 0,arguments)}}},[t._v(t._s(t._f("lang")("立即开通会员")))])],1):t._e()],1)},n=[]},"789e":function(t,i,a){"use strict";a.r(i);var e=a("19f3"),n=a.n(e);for(var o in e)["default"].indexOf(o)<0&&function(t){a.d(i,t,(function(){return e[t]}))}(o);i["default"]=n.a},"965c":function(t,i,a){var e=a("4459");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=a("4f06").default;n("534cbef1",e,!0,{sourceMap:!1,shadowMode:!1})},"97f0":function(t,i,a){"use strict";var e=a("965c"),n=a.n(e);n.a}}]);